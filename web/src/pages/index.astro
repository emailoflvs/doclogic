---
import '../styles/global.css';
const year = new Date().getFullYear();
---
<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DocLogic — автоматизация ввода данных из накладных</title>
    <meta name="description" content="DocLogic превращает фото/скан/PDF накладной в готовые данные для CRM / 1C / Excel / бух. учёта и любых других систем — без ручной перепечатки." />
    <link rel="icon" href="/assets/favicon.svg" />
  </head>
  <body>
    <!-- Top Nav -->
    <header class="sticky top-0 z-50 border-b border-slate-200/70 bg-white/70 backdrop-blur">
      <div class="container flex h-16 items-center justify-between">
        <a href="#top" class="flex items-center gap-3">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-slate-900 text-white font-bold">DL</span>
          <span class="font-semibold">DocLogic</span>
        </a>

        <nav class="hidden md:flex items-center gap-6 text-sm text-slate-600">
          <a class="hover:text-slate-900" href="#how">Как работает</a>
          <a class="hover:text-slate-900" href="#benefits">Выгоды</a>
          <a class="hover:text-slate-900" href="#integrations">Интеграции</a>
          <a class="hover:text-slate-900" href="#custom">Настройка</a>
          <a class="hover:text-slate-900" href="#pricing">Внедрение и цена</a>
          <a class="hover:text-slate-900" href="#faq">FAQ</a>
        </nav>

        <a class="btn btn-primary" href="#request">Запросить предложение</a>
      </div>
    </header>

    <main id="top">
      <!-- Hero -->
      <section class="py-10 md:py-14">
        <div class="container grid gap-10 lg:grid-cols-2 lg:items-start">
          <div>
            <div class="badge">AI для складского документооборота</div>
            <h1 class="mt-4 text-4xl md:text-5xl font-bold tracking-tight">
              Перестаньте платить за<br />ручной ввод накладных
            </h1>
            <p class="p mt-4 max-w-xl">
              DocLogic превращает фото/скан/PDF накладной в готовые данные для <b>CRM / 1C / Excel / бух. учёта</b> и любых других систем — за минуты.
            </p>

            <ul class="mt-6 space-y-3 text-sm text-slate-700">
              <li class="flex gap-3"><span class="mt-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-slate-900 text-white text-xs">✓</span> Экономия человеко‑часов и бюджета на перепечатке строк</li>
              <li class="flex gap-3"><span class="mt-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-slate-900 text-white text-xs">✓</span> Быстрее закрытие поступлений и актуальные данные в системе</li>
              <li class="flex gap-3"><span class="mt-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-slate-900 text-white text-xs">✓</span> Меньше ручных ошибок — меньше расхождений</li>
            </ul>

            <div class="mt-8 flex flex-wrap gap-3">
              <a class="btn btn-primary" href="#request">Запросить предложение</a>
              <a class="btn btn-secondary" href="#how">Как работает</a>
            </div>
            <div class="small mt-2">Запрос на ваших документах. Без обязательств.</div>
          </div>

          <div class="card p-5 md:p-6">
            <div class="flex items-start justify-between gap-4">
              <div>
                <div class="flex items-center gap-2">
                  <h3 class="text-lg font-semibold">Из накладной → в данные</h3>
                  <span class="badge">B2B</span>
                </div>
                <div class="mt-1 text-sm text-slate-600">
                  Фото/файл документа → AI‑анализ → подтверждение → CRM / 1C / Excel / бух. учёт и другое
                </div>
              </div>
            </div>

            <div class="mt-4 rounded-2xl bg-slate-50 ring-1 ring-slate-200 overflow-hidden">
              <img src="/assets/hero-visual.svg" alt="Из накладной в данные" class="w-full" loading="lazy" />
            </div>
          </div>
        </div>
      </section>

      <!-- How it works (4 steps) -->
      <section id="how" class="py-10 md:py-14">
        <div class="container">
          <h2 class="h2">Как DocLogic работает</h2>
          <p class="p mt-2">Вход — накладная (фото/скан/PDF), выход — готовые данные в вашу систему.</p>

          <div class="mt-8 grid gap-5 md:grid-cols-2 lg:grid-cols-4">
            <div class="card p-5">
              <div class="badge">Шаг 1</div>
              <div class="mt-3 text-lg font-semibold">Загружаете документ</div>
              <div class="p mt-2 text-sm">Через Telegram или загрузку на сайте.</div>
            </div>
            <div class="card p-5">
              <div class="badge">Шаг 2</div>
              <div class="mt-3 text-lg font-semibold">AI‑анализ</div>
              <div class="p mt-2 text-sm">Извлекаем <b>абсолютно все данные</b> из документа и показываем их вам в web‑форме.</div>
            </div>
            <div class="card p-5">
              <div class="badge">Шаг 3</div>
              <div class="mt-3 text-lg font-semibold">Проверяете и подтверждаете</div>
              <div class="p mt-2 text-sm">Человек контролирует исключения — рутина уходит.</div>
            </div>
            <div class="card p-5">
              <div class="badge">Шаг 4</div>
              <div class="mt-3 text-lg font-semibold">Сохраняем в вашу систему</div>
              <div class="p mt-2 text-sm">Данные уходят в CRM / 1C / Excel / бух. учёт и любое другое — или через API.</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Benefits -->
      <section id="benefits" class="py-10 md:py-14">
        <div class="container">
          <h2 class="h2">Выгоды для бизнеса</h2>
          <p class="p mt-2">Основной эффект — сокращение затрат на ручной ввод документов.</p>

          <div class="mt-8 grid gap-5 md:grid-cols-3">
            <div class="card p-5">
              <div class="text-base font-semibold">Экономия ФОТ и человеко‑часов</div>
              <p class="p mt-2 text-sm">Рутинный ввод уходит: меньше операторов — или те же люди делают более ценную работу.</p>
            </div>
            <div class="card p-5">
              <div class="text-base font-semibold">Скорость обработки поступлений</div>
              <p class="p mt-2 text-sm">Данные быстрее попадают в систему — склад и бухгалтерия работают синхронно.</p>
            </div>
            <div class="card p-5">
              <div class="text-base font-semibold">Единая структура данных</div>
              <p class="p mt-2 text-sm">Разные поставщики и форматы → один понятный результат для вашей учётной модели.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Integrations -->
      <section id="integrations" class="py-10 md:py-14">
        <div class="container">
          <h2 class="h2">Интеграции</h2>
          <p class="p mt-2">Передаём данные туда, где вы работаете — без “ручных мостиков”.</p>

          <div class="mt-8 grid gap-5 lg:grid-cols-2">
            <div class="card p-6">
              <div class="text-base font-semibold">Куда выгружаем</div>
              <div class="mt-4 grid gap-3 sm:grid-cols-2 text-sm">
                <div class="flex items-start gap-3"><span class="mt-0.5 inline-flex h-6 w-6 items-center justify-center rounded-full bg-slate-100">✓</span><div><b>CRM / 1C</b></div></div>
                <div class="flex items-start gap-3"><span class="mt-0.5 inline-flex h-6 w-6 items-center justify-center rounded-full bg-slate-100">✓</span><div><b>Бухгалтерские/учётные системы</b></div></div>
                <div class="flex items-start gap-3"><span class="mt-0.5 inline-flex h-6 w-6 items-center justify-center rounded-full bg-slate-100">✓</span><div><b>Excel / Google Sheets</b></div></div>
                <div class="flex items-start gap-3"><span class="mt-0.5 inline-flex h-6 w-6 items-center justify-center rounded-full bg-slate-100">✓</span><div><b>Любая другая программа</b></div></div>
              </div>
              <p class="p mt-4 text-sm">При необходимости подключаем API и делаем кастомные интеграции под вашу инфраструктуру.</p>
              <div class="small mt-2">Интеграции настраиваются под ваш контур (в т.ч. Docker/on‑prem).</div>
            </div>

            <!-- Filled right block -->
            <div class="card p-6">
              <div class="text-base font-semibold">Как подключаем</div>
              <p class="p mt-2 text-sm">Выбираем самый простой и надёжный путь доставки данных под ваши процессы.</p>

              <div class="mt-4 grid gap-3 sm:grid-cols-2 text-sm">
                <div class="rounded-2xl bg-slate-50 ring-1 ring-slate-200 p-4">
                  <div class="font-semibold">API / Webhooks</div>
                  <div class="mt-1 text-slate-600">Для прямой записи в CRM/1C/ERP.</div>
                </div>
                <div class="rounded-2xl bg-slate-50 ring-1 ring-slate-200 p-4">
                  <div class="font-semibold">XLSX / CSV</div>
                  <div class="mt-1 text-slate-600">Если нужно быстро внедрить без разработки.</div>
                </div>
                <div class="rounded-2xl bg-slate-50 ring-1 ring-slate-200 p-4">
                  <div class="font-semibold">Форма подтверждения</div>
                  <div class="mt-1 text-slate-600">Контроль исключений перед сохранением.</div>
                </div>
                <div class="rounded-2xl bg-slate-50 ring-1 ring-slate-200 p-4">
                  <div class="font-semibold">Размещение в вашем контуре</div>
                  <div class="mt-1 text-slate-600">Docker на вашем сервере — данные остаются у вас.</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Customization / key advantage -->
      <section id="custom" class="py-10 md:py-14">
        <div class="container">
          <h2 class="h2">Настройка под ваши требования</h2>
          <p class="p mt-2">Накладные бывают любыми: разные языки, таблицы, форматы. DocLogic приводит их к <b>той структуре данных, которая вам нужна</b>.</p>

          <div class="mt-8 grid gap-5 lg:grid-cols-3">
            <div class="card p-6 lg:col-span-2">
              <div class="text-base font-semibold">Главное преимущество</div>
              <p class="p mt-2 text-sm">
                Мы не «подгоняем вас под шаблон». Мы настраиваем DocLogic под ваш документопоток: какие поля извлекать, как нормализовать номенклатуру,
                единицы измерения, НДС/валюты, правила округления и в каком виде сохранять результат.
              </p>
              <p class="p mt-3 text-sm"><b>На выходе вы получаете данные в формате вашей системы</b> — и процесс становится стабильным даже при «зоопарке» накладных.</p>

              <div class="mt-4 grid gap-3 sm:grid-cols-2 text-sm">
                <div class="rounded-2xl bg-slate-50 ring-1 ring-slate-200 p-4"><b>Поля и таблицы</b><div class="mt-1 text-slate-600">Позиции, количества, цены, суммы, реквизиты.</div></div>
                <div class="rounded-2xl bg-slate-50 ring-1 ring-slate-200 p-4"><b>Правила обработки</b><div class="mt-1 text-slate-600">Сопоставления, нормализация, проверки.</div></div>
                <div class="rounded-2xl bg-slate-50 ring-1 ring-slate-200 p-4"><b>Структура на выходе</b><div class="mt-1 text-slate-600">Под вашу CRM/1C/Excel/учёт.</div></div>
                <div class="rounded-2xl bg-slate-50 ring-1 ring-slate-200 p-4"><b>Интеграции</b><div class="mt-1 text-slate-600">API, файлы, web‑форма подтверждения.</div></div>
              </div>
            </div>

            <div class="card p-6">
              <div class="text-base font-semibold">Подходит, если</div>
              <ul class="mt-4 space-y-3 text-sm text-slate-700">
                <li class="flex gap-3"><span class="mt-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-slate-900 text-white text-xs">✓</span> много поступлений и много позиций в накладных</li>
                <li class="flex gap-3"><span class="mt-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-slate-900 text-white text-xs">✓</span> поставщики присылают документы «как получится»</li>
                <li class="flex gap-3"><span class="mt-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-slate-900 text-white text-xs">✓</span> стоимость ручного ввода уже ощутима для бюджета</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Pricing moved later (after value) -->
      <section id="pricing" class="py-10 md:py-14">
        <div class="container">
          <h2 class="h2">Внедрение и цена</h2>
          <p class="p mt-2">Стоимость зависит от объёма, типов документов и интеграций — потому что продукт дорабатывается под ваш процесс.</p>

          <div class="mt-8 grid gap-5 md:grid-cols-3">
            <div class="card p-6">
              <div class="text-sm font-semibold text-slate-600">Настройка</div>
              <div class="mt-2 text-3xl font-bold">от 400 €</div>
              <p class="p mt-2 text-sm">Под ваши документы, правила и структуру данных.</p>
            </div>
            <div class="card p-6">
              <div class="text-sm font-semibold text-slate-600">Подписка</div>
              <div class="mt-2 text-3xl font-bold">от 100 €/мес</div>
              <p class="p mt-2 text-sm">Зависит от объёма и сценариев обработки.</p>
            </div>
            <div class="card p-6">
              <div class="text-sm font-semibold text-slate-600">Что входит</div>
              <ul class="mt-3 space-y-2 text-sm text-slate-700">
                <li class="flex gap-2"><span class="mt-1">•</span> настройка под ваши шаблоны</li>
                <li class="flex gap-2"><span class="mt-1">•</span> интеграция (API/файлы/форма)</li>
                <li class="flex gap-2"><span class="mt-1">•</span> поддержка и развитие</li>
              </ul>
            </div>
          </div>

          <div class="mt-6 small">Примечание: детали фиксируем в коммерческом предложении после просмотра ваших примеров документов.</div>
        </div>
      </section>

      <!-- FAQ -->
      <section id="faq" class="py-10 md:py-14">
        <div class="container">
          <h2 class="h2">FAQ</h2>
          <div class="mt-8 grid gap-5 lg:grid-cols-2">
            <div class="card p-6">
              <div class="font-semibold">Это заменяет сотрудников?</div>
              <p class="p mt-2 text-sm">Нет — снимает рутину. Человек контролирует исключения и сложные случаи.</p>
            </div>
            <div class="card p-6">
              <div class="font-semibold">Если у поставщиков разные шаблоны?</div>
              <p class="p mt-2 text-sm">Это нормально. Мы настраиваем DocLogic под ваш набор документов и правила обработки.</p>
            </div>
            <div class="card p-6">
              <div class="font-semibold">Можно без Telegram?</div>
              <p class="p mt-2 text-sm">Да, есть загрузка через сайт и интеграции по API.</p>
            </div>
            <div class="card p-6">
              <div class="font-semibold">Насколько быстро внедрение?</div>
              <p class="p mt-2 text-sm">Стартуем с ваших документов и быстро выводим в рабочий сценарий.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Request -->
      <section id="request" class="py-10 md:py-14">
        <div class="container">
          <div class="rounded-3xl bg-slate-900 text-white p-8 md:p-10">
            <div class="grid gap-8 lg:grid-cols-2 lg:items-start">
              <div>
                <div class="badge bg-white/10 text-white">Запрос</div>
                <h2 class="mt-4 text-3xl md:text-4xl font-bold tracking-tight">Запросить предложение</h2>
                <p class="mt-3 text-white/80 leading-relaxed">
                  Пришлите примеры накладных — мы оценим объём, подскажем сценарий внедрения и подготовим коммерческое предложение.
                </p>
                <ul class="mt-6 space-y-3 text-sm text-white/85">
                  <li class="flex gap-3"><span class="mt-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-white/15">✓</span> обработка ваших реальных документов</li>
                  <li class="flex gap-3"><span class="mt-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-white/15">✓</span> пример структуры данных «как вам нужно»</li>
                  <li class="flex gap-3"><span class="mt-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-white/15">✓</span> план внедрения и оценка экономии</li>
                </ul>
              </div>

              <form id="leadForm" class="rounded-3xl bg-white text-slate-900 p-6 md:p-7" enctype="multipart/form-data">
                <!-- Honeypot field for spam protection (hidden from users) -->
                <input type="text" name="website" autocomplete="off" tabindex="-1" style="position:absolute;left:-9999px;" aria-hidden="true" />

                <div class="text-lg font-semibold">Контакты</div>
                <p class="mt-1 text-sm text-slate-600">Оставьте имя и любой контакт (email или телефон). Можно приложить примеры документов.</p>

                <div class="mt-5 grid gap-4 sm:grid-cols-2">
                  <div>
                    <label class="text-sm font-medium" for="name">Имя</label>
                    <input id="name" name="name" required class="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm" placeholder="" />
                  </div>
                  <div>
                    <label class="text-sm font-medium" for="company">Компания</label>
                    <input id="company" name="company" class="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm" placeholder="" />
                  </div>
                  <div>
                    <label class="text-sm font-medium" for="email">Email</label>
                    <input id="email" name="email" type="email" class="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm" placeholder="name@company.com" />
                  </div>
                  <div>
                    <label class="text-sm font-medium" for="phone">Телефон</label>
                    <input id="phone" name="phone" class="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm" placeholder="" />
                  </div>
                </div>

{false && (
                <div class="mt-4">
                  <div class="text-sm font-medium">Типы документов</div>
                  <div class="mt-3 grid gap-3 sm:grid-cols-2">
                    <label class="check"><input type="checkbox" name="doc_types" value="Накладные" checked />Накладные</label>
                    <label class="check"><input type="checkbox" name="doc_types" value="Счета" />Счета</label>
                    <label class="check"><input type="checkbox" name="doc_types" value="Акты" />Акты</label>
                    <label class="check"><input type="checkbox" name="doc_types" value="Другое" />Другое</label>
                  </div>
                </div>
              )}

                <div class="mt-4">
                  <label class="text-sm font-medium" for="samples">Примеры документов (опционально)</label>
                  <input id="samples" name="samples" type="file" class="file mt-2" multiple accept="image/*,application/pdf" />
                  <div class="small mt-2">Можно приложить до 5 файлов (фото/сканы/PDF).</div>
                </div>

                <div class="mt-4">
                  <label class="text-sm font-medium" for="message">Комментарий</label>
                  <textarea id="message" name="message" rows="4" class="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm" placeholder="Какая система учёта/CRM, сколько накладных в месяц, какие поставщики…"></textarea>
                </div>

                <button id="submitBtn" class="btn btn-primary w-full mt-6" type="submit">Отправить запрос</button>
                <div id="formMsg" class="small mt-3"></div>

                <!--
                  DEMO (не показываем на сайте сейчас):
                  - после получения запроса предлагать выбрать слот на демо через 5–7 дней
                  - можно подключить Calendly/Cal.com
                -->
              </form>
            </div>
          </div>
        </div>
      </section>

      <footer class="py-8">
        <div class="container flex flex-col gap-3 md:flex-row md:items-center md:justify-between text-sm text-slate-500">
          <div>© {year} DocLogic</div>
          <a class="hover:text-slate-800" href="#request">Запросить предложение</a>
        </div>
      </footer>
    </main>

    <script>
      const form = document.getElementById('leadForm');
      const msg = document.getElementById('formMsg');
      const submitBtn = document.getElementById('submitBtn');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        msg.textContent = '';

        const email = (document.getElementById('email').value || '').trim();
        const phone = (document.getElementById('phone').value || '').trim();
        if (!email && !phone) {
          msg.textContent = 'Укажите email или телефон — любой контакт подходит.';
          msg.className = 'small mt-3 text-red-600';
          return;
        }

        // Disable button and show loading state
        submitBtn.disabled = true;
        const originalText = submitBtn.textContent;
        submitBtn.textContent = 'Отправка...';
        submitBtn.style.opacity = '0.7';
        submitBtn.style.cursor = 'not-allowed';

        const fd = new FormData(form);

        // Collect doc_types into one array field
        const selected = [...form.querySelectorAll('input[name="doc_types"]:checked')].map(i => i.value);
        fd.delete('doc_types');
        selected.forEach(v => fd.append('doc_types', v));

        try {
          const res = await fetch('/api/lead', { method: 'POST', body: fd });
          if (!res.ok) throw new Error(await res.text());

          const data = await res.json();
          console.log('Результаты отправки:', data.results);

          // Check critical channels (email and telegram)
          // WhatsApp is optional, so we ignore its errors
          const criticalChannels = ['email', 'telegram'];
          const criticalResults = criticalChannels
            .map(key => data.results?.[key])
            .filter(Boolean);

          // Check if critical channels have errors
          const criticalHasErrors = criticalResults.some(r => r.error);
          // Check if at least one critical channel succeeded
          const criticalHasSuccess = criticalResults.some(r => r.ok);

          // Check if critical channels were skipped (not configured)
          const criticalAllSkipped = criticalResults.length > 0 &&
            criticalResults.every(r => r.skipped && !r.ok);

          if (criticalHasErrors) {
            console.error('Ошибки при отправке в критичные каналы:', data.results);
            msg.textContent = 'Запрос отправлен, но возникли ошибки при уведомлении. Проверьте логи сервера.';
            msg.className = 'small mt-3 text-yellow-600';
            // Re-enable button on error
            submitBtn.disabled = false;
            submitBtn.textContent = originalText;
            submitBtn.style.opacity = '1';
            submitBtn.style.cursor = 'pointer';
          } else if (criticalAllSkipped) {
            console.warn('Критичные уведомления не настроены:', data.results);
            msg.textContent = 'Запрос отправлен. Уведомления не настроены.';
            msg.className = 'small mt-3 text-yellow-600';
            // Re-enable button on warning
            submitBtn.disabled = false;
            submitBtn.textContent = originalText;
            submitBtn.style.opacity = '1';
            submitBtn.style.cursor = 'pointer';
          } else if (criticalHasSuccess) {
            // At least one critical channel succeeded - redirect to thanks page
            window.location.href = '/thanks/';
            return;
          } else {
            // Fallback: if we got here, something unexpected happened
            console.warn('Неожиданное состояние результатов:', data.results);
            // Still redirect to thanks page as form was submitted
            window.location.href = '/thanks';
            return;
          }
        } catch (err) {
          msg.textContent = 'Не удалось отправить. Проверьте соединение и попробуйте ещё раз.';
          msg.className = 'small mt-3 text-red-600';
          console.error('Ошибка отправки:', err);
          // Re-enable button on error
          submitBtn.disabled = false;
          submitBtn.textContent = originalText;
          submitBtn.style.opacity = '1';
          submitBtn.style.cursor = 'pointer';
        }
      });
    </script>
  </body>
</html>
